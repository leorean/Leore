<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>mskEnemy</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>objEnemy</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>xVel = 0;
yVel = 0;
hurt = 0;
hp = 1;
xCol = false;
yCol = false;
type = 0;

row = 0;
col = 0;

d = 1.5*TILE;
xo = x + d / 2;
yo = y + d / 2;

sprite = -1;
eye_x = 0;
eye_y = 0;
eye_f = 0;
eye_d = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>sprite_delete(sprite);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>xVel *= .93;
yVel *= .93;
hurt = max(hurt - 1, 0);

if(hp == 0) {
    var eff = instance_create(x, y, objEffect);
    eff.type = 2;
    instance_destroy();
}

if (collision_point(x, y, objHole, 0, 1)) {
    hp = 0;
}

instance_deactivate_object(objAny);
instance_activate_region(x - 32, y - 32, 64 ,64, true);
for (var i = 0; i &lt; instance_number(objAny); i++) {
    var s = instance_find(objAny, i);
    if (is(s, objSolid)
    &amp;&amp; !is(s, objHole)) {
        if (place_meeting(x + xVel, y, s)) {
            xCol = true;
        }
        if (place_meeting(x, y + yVel, s)) {
            yCol = true;
        }
    }
    if(place_meeting(x + xVel, y + yVel, s) &amp;&amp;
        s.id != id &amp;&amp; is(s, objEnemyBall) &amp;&amp; s.hp &gt; 0) {
        
        var angle = point_direction(x, y, s.x, s.y);

        var vel = max(abs(xVel), abs(yVel), 1);

        xVel = lengthdir_x(-vel, angle);
        yVel = lengthdir_y(-vel, angle);
        s.xVel = lengthdir_x(vel, angle);
        s.yVel = lengthdir_y(vel, angle);
        
    }
}
instance_activate_object(objAny);

if (!xCol) {
    x += xVel;
} else {
        xVel = -xVel;
}
if (!yCol) {
    y += yVel;
} else {
    yVel = -yVel;
}
x = max(min(x, room_width - 8), 8);
y = max(min(y, room_height - 8), 8);
xCol = false;
yCol = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var _x = (x - xo) % (d);
var _y = (y - yo) % (d);
var near = point_distance(x, y, objPlayer.x, objPlayer.y) &lt; 4*TILE;

if (near) {
    eye_f = min(eye_f + .2, 3);
    if(eye_f == 3) {
        var ang = point_direction(x, y, objPlayer.x, objPlayer.y);
        eye_d = min(eye_d + .1, 1.5);
        eye_x = lengthdir_x(eye_d, ang);
        eye_y = lengthdir_y(eye_d, ang);
    }
} else {
    eye_f = max(eye_f - .2, 0);
    eye_d = 0;
    eye_x = 0;
    eye_y = 0;
}

if (sprite_exists(sprite))
    sprite_delete(sprite);

draw_set_blend_mode(bm_normal);
var surf = surface_create(TILE, TILE);
surface_set_target(surf);

draw_set_blend_mode(bm_normal);

// background
draw_sprite_part(sprEnemyBall, -1, 3*TILE, 0, TILE, TILE, 0, 0);

// eyeball
for(var i = -1; i &lt; 2; i++) {
    for(var j = -1; j &lt; 2; j++) {
        draw_sprite_part(sprEnemyBall, -1, 1*TILE, floor(eye_f)*TILE, TILE, TILE, _x - (d*.5) + i*d, _y - (d*.5) + j*d);
        draw_sprite_part(sprEnemyBall, -1, 2*TILE, floor(eye_f)*TILE, TILE, TILE, _x - (d*.5) + i*d + eye_x, _y - (d*.5) + j*d + eye_y);
    }
}
 
// sub-mask   
draw_set_blend_mode(bm_subtract);
draw_sprite_part(sprEnemyBall, -1, 0, 0, TILE, TILE, 0, 0);

draw_set_blend_mode(bm_add);

// highlights
draw_sprite_part_ext(sprEnemyBall, -1, 0, 2*TILE, TILE ,TILE, 0, 0, 1, 1, c_white, .15);
draw_sprite_part_ext(sprEnemyBall, -1, 0, 3*TILE, TILE ,TILE, 0, 0, 1, 1, c_white, .15);

draw_set_blend_mode(bm_normal);

// contour
draw_sprite_part(sprEnemyBall, -1, 0, TILE, TILE ,TILE, 0, 0);

sprite = sprite_create_from_surface(surf, 0, 0, TILE, TILE, 0, 0, 8, 8);

surface_reset_target();
surface_free(surf);

draw_sprite(sprite, -1, x, y);


</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
